멀티스레드
=============
__multi_thread__ : 멀티 스레드, 하나의 프로세스 내에서 둘 이상의 스레드가 동시에 작업을 수행하는 것을 의미함.
*__multi_process__ : 멀티 프로세스, 여러 개의 CPU를 사용하여 여러 프로세스를 동시에 수행하는 것을 의미함.
> 멀티 스레드와 멀티 프로세스 모두 여러 흐름을 동시에 수행하다는 공통점을 가지고 있는데, 멀티 프로세스는 각 프로세스가 독립적인 메모리를 가지고 별도로 실행되지만, 멀티 스레드는 각 스레드가 자신이 속한 프로세스의 메모리를 공유한다는 점이 다름

> 멀티 스레드는 각 스레드가 자신이 속한 프로세스의 메모리를 공유하므로, 시스템 자원의 낭비가 적음, 또한 하나의 스레드가 작업을 할 때 다른 스레드가 별도의 작업을 할 수 있어 사용자와의 응답성도 좋아진다.

사용하는 이유는?
-----------------
> 프로세스를 이용하여 동시에 처리하던 일을 스레드로 구현할 경우 메모리 공간과 자원 소모를 줄일 수 있게 됨
> 스레드 간의 통신이 필요한 경우에도 별도의 자원을 이용하는 것이 아니라 전역 변수의 공간 또는 동적으로 할당된 공간인 Heap 영역을 이용하여 데이터를 주고 받을 수 있는 통신을 할 수 있다.
> 그렇기 때문에 프로세스 간 통신 방법에 비해 스레드 간의 통신 방법이 훨씬 간단하다. 심지어 __스레드 문맥교환은 프로세스의 문맥교환과는 달리 캐시 메모리를 비울 필요가 없기 때문에 더 빠르다.__
> 따라서 앞에서 언급한 것처럼 시스템의 처리량이 향상되고 자원 소모가 줄어들어 자연스럽게 프로그램의 응답 시간이 단축된다.[ 즉, 프로그램이 빨라진다 ]
> 이러한 점들 때문에 여러 프로세로 할 수 있는 작업들을 하나의 프로세스에 여러 스레드로 나누어 수행하는 것이다.

멀티 프로세스와 멀티 스레드의 차이점
----------------------------
> 멀티 프로세스 : [데이터, 힙, 스택] 영역 모두를 비공유한다.
> 멀티 스레드 : [데이터, 힙, 스택] 영역 중 스택영역만 비공유하고 데이터와 힙 영역은 공유한다.

멀티 스레딩의 장점
-------------------
> 프로세스 생성은 앞에서 언급한 것과 같이 많은 시간과 자원을 소비한다. 이러한 단점을 최소화 시킨 일종의 __경량화된 프로세스인 스레드__를 만들게 된 것이다.
- 멀티 스레드에서 스레드 간 스택영역만 비공유하고 데이터 영역과 힙 영역은 공유한다.
- 스레드의 생성 및 컨텍스트 스위칭은 프로세스의 생성 및 컨텍스트 스위칭보다 빠르다.
- 멀티 스레드 컨텍스트 스위칭 시 데이터 영역과 힙 영역을 올리고 내릴 필요가 없다.
- 데이터 영역과 힙 영역을 통해 데이터 교환이 가능하다.
- 스레드 사이에서의 데이터 교환에는 특별한 기법이 필요하지 않다.

멀티 스레딩의 문제점
-------------------
> __멀티 프로세스__ 기반으로 프로그래밍할 때는 프로세스 간 공유하는 자원이 없기 때문에 동일한 자원에 대해 접근하는 일이 없었지만 멀티 스레딩을 기반으로 프로그래밍할 때는 이 부분을 신경써줘야 한다.
> 서로 다른 스레드가 데이터 영역과 힙 영역을 공유하기 때문에 어떤 스레드가 다른 스레드에서 사용중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다.
> 그렇기 때문에 __동기화 작업__이 필요하다.

동기화(synchronization)
-----------------
> __스레드__ 는 자원을 공유하기 때문에 동시에 여러 스레드가 동시에 하나의 자원에 접근하여 사용하려고 하면 문제가 발생할 수 있다.
> 이런 문제를 방지하기 위해 스레드들에게 하나의 자원에 대한 처리 권한을 주거나 순서를 조정해주는 기법이다.
> 동기화 작업을 통하여 작업 처리 순서를 컨트롤하고 공유 자원에 대한 잡근을 컨트롤 하는 것이다. 하지만 이로 인해 병목 현상이 발생하여 성능이 저하될 가능성이 높다. 그러므로 과도한 락(lock)으로 인한 병목 현상을 줄여야 한다.
> 공유 자원이 아닌 부분은 동기화 처리를 할 필요가 없다. 불필요한 부분까지 동기화 처리를 하게 되면 락을 획득한 스레드가 종료하기 전까지 대기해야한다. 그렇게 되면 전체 성능에 악영향을 미치게 된다.
> 즉, 동기화를 하고자 할 때는 메소드 전체를 동기화 할 것인가 아니면 특정 부분만 동기화할 것인가를 고민해야한다.

임계영역(critical section)
--------------------------
> 둘 이상의 스레드( 또는 프로세스 )가 공유 자원에 동시에 접근하면 문제가 발행할 수 있다. 이런 문제를 일으킬 수 있는 코드 블록을 임계영역이라고 한다.
> 즉, 임계 영역이란 배타적 접근 권한( 한순간에 하나의 스레드만이 접근 가능한 )이 요구되는 공유 리소스( 전역변수, static 변수 등)에 접근하는 코드 블럭을 의미한다.
> 한 스레드가 사용 중인 자원은 작업이 끝날 때까지 lock을 걸어서 다른 스레드가 사용할 수 없도록 한다.

동기화 방법
--------------------
> 여러 스레들은 자원을 공유하고, 프로세스간 메시지를 전송하면서 간혹 문제가 발생할 수 있는데, 즉, 공유된 자원에 여러 프로세스, 스레드가 접근하면서 문제가 발생한다.
> 그래서 동기화를 통해 작업의 처리 순서와 공유자원에 대한 접근을 컨트롤 하는 것이다.
> mutex / Semaphore / Monitor
 총 3가지가 존재하고 모두 운영체제의 동기화 기법이다.
 

뮤텍스(mutex)
--------------------
> 임계영역과 마찬가지로 공유자원에 여러 스레드가 접근하려고 할 때, lock을 이용해 한 번에 하나의 스레드만 접근하도록 허용하는 것이다.
> 임계영역은 한 프로세스 내의 스레드에만 사용 가능하지만 뮤텍스는 서로 다르 프로세스에 속한 스레드에도 적용 가능하다.

세마포어(semaphore)
-------------------
> 한정된 자원을 여러 스레드가 사용하려고 할 때 접근을 제한한다.
> 다중 스레드 간 공유 자원 접근 순서를 제어하고 공유 자원의 수와 접근 스레드 수에 따라서 보다 유연하게 공유영역으로의 접근을 제어한다.

![세마포어 예제 프로그램 결과](https://user-images.githubusercontent.com/28287323/115248355-9397d400-a162-11eb-8bd1-44346fb4c369.png )

